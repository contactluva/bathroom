<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Táº¡o hÃ³a Ä‘Æ¡n nhÃ¡p</title>
<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;padding:12px;background:#f5f5f5;font-size:14px}
h2{margin:0 0 12px;font-size:18px;color:#333}
.row{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:8px}
.row>div{flex:1 1 260px;display:flex;flex-direction:column}
label{font-weight:bold;margin-bottom:4px}
textarea,input[type=number],input[type=text]{width:100%;padding:8px;border:1px solid #bbb;border-radius:4px;resize:vertical;font-size:14px}
textarea{min-height:40px;font-family:inherit}
table{width:100%;border-collapse:collapse;background:#fff;margin-top:8px;font-size:14px}
th,td{border:1px solid #ddd;padding:6px 4px;text-align:center;word-break:break-word}
th{background:#eee}
.btn-add{background:#28a745;color:#fff;border:none;padding:6px 10px;border-radius:4px;font-size:14px}
.btn-send{background:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;font-size:14px;margin-top:8px;width:100%}
.btn-del{background:#dc3545;color:#fff;border:none;padding:4px 6px;border-radius:4px;font-size:12px}
@media(max-width:500px){table{font-size:12px}th,td{padding:4px 2px}}

/* thÃªm css cho Ã´ chá»n */
.ten-sp-wrapper{position:relative}
.ten-sp-wrapper select{
  position:absolute;
  top:0;right:0;bottom:0;width:26px;
  opacity:0;           /* áº©n select tháº­t */
  cursor:pointer
}
.ten-sp-wrapper::after{      /* mÅ©i tÃªn â–¿ */
  content:"â–¾";
  position:absolute;
  right:6px;top:50%;transform:translateY(-50%);
  pointer-events:none;color:#555
}
</style>
</head>
<body>

<h2>YÃŠU Cáº¦U Táº O HÃ“A ÄÆ N NHÃP</h2>

<div class="row">
  <div>
    <label>TÃªn cÃ´ng ty + MST</label>
    <textarea id="cty_mst" rows="2" placeholder="TÃªn cÃ´ng ty&#10;MST: 0123456789"></textarea>
  </div>
</div>

<table id="hangTable">
  <thead>
    <tr>
      <th style="width:45%">TÃªn sáº£n pháº©m</th>
      <th style="width:20%">Sá»‘ lÆ°á»£ng</th>
      <th style="width:25%">ÄÆ¡n giÃ¡ (VNÄ)</th>
      <th style="width:10%"></th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
<button class="btn-add" onclick="themHang()">+ ThÃªm hÃ ng</button>
<button class="btn-send" onclick="guiTelegram()">Gá»­i Ä‘i</button>

<script>
const TOKEN  = "5572397080:AAFqa1dOYqvKrQ8-Wx5ez7PaqsVtvWU8vjA";
const CHAT_ID = "-4686229366";

const MAU_TEN = [
"CÃ¢n Ä‘iá»‡n tá»­, dÃ¹ng Ä‘á»ƒ cÃ¢n hÃ ng hÃ³a, loáº¡i 832\t9",
"CÃ¢n Ä‘iá»‡n tá»­,cÃ³ kháº£ nÄƒng cÃ¢n tá»‘i Ä‘a 40 kg, dÃ¹ng Ä‘á»ƒ cÃ¢n hÃ ng hoÃ¡, gá»“m cÃ³ cÃ¢n vÃ  mÃ¡y tÃ­nh, Loáº¡i: K019\t28",
"CÃ¢n Ä‘iá»‡n tá»­ dÃ¹ng Ä‘á»ƒ cÃ¢n hÃ ng hoÃ¡, loáº¡i RJ-IND- 8006-5. HÃ ng má»›i 100%\t41",
"CÃ¢n Ä‘iá»‡n tá»­ FEM-200g",
"CÃ¢n Ä‘iá»‡n tá»­ K-3000BH-3kg",
"CÃ¢n Ä‘iá»‡n tá»­ KDTBED1200",
"CÃ¢n Ä‘iá»‡n tá»­ KD 160, cÃ¢n tá»‘i Ä‘a 2kg",
"CÃ¢n Ä‘iá»‡n tá»­ KD321, cÃ¢n tá»‘i Ä‘a 3kg",
"CÃ¢n Ä‘iá»‡n tá»­ BDC-DS 6kg/0.5g",
"CÃ¢n Ä‘iá»‡n tá»­ GS-622N",
"CÃ¢n Ä‘iá»‡n tá»­ LS-DS",
"CÃ¢n Ä‘iá»‡n tá»­ MT-5002",
"CÃ¢n Ä‘iá»‡n tá»­ FEH-1 kg",
"Äáº§u CÃ¢n Äiá»‡n Tá»­",
"Pin axit-chÃ¬, dÃ¹ng cho cÃ¢n Ä‘iá»‡n tá»­, loáº¡i: SP-XDC4V5AH, Ä‘iá»‡n Ã¡p:4V/5AH, (chiá»u cao < 13cm), NSX:Yongkang Yihong Trading Co.,Ltd",
"Sáº¡c adapter, dÃ¹ng cho cÃ¢n Ä‘iá»‡n tá»­, Ä‘iá»‡n Ã¡p 6.5V, NSX:YONGKANG HUAYING WEIGHING APPARATUS CO.,LTD. HÃ ng má»›i 100%",
"Cáº£m biáº¿n táº£i trá»ng dÃ¹ng cho cÃ¢n Ä‘iá»‡n tá»­, model: NA4, cháº¥t liá»‡u: há»£p kim nhÃ´m, kÃ­ch thÆ°á»›c: 17.4 * 6 * 6.4 cm",
"Cáº£m biáº¿n táº£i trá»ng dÃ¹ng cho cÃ¢n Ä‘iá»‡n tá»­, cháº¥t liá»‡u: há»£p kim nhÃ´m, kÃ­ch thÆ°á»›c: 14.6*4*2.3 cm",
"CÃ¢n Ä‘iá»‡n tá»­, mÃ£:K369+",
"CÃ¢n Ä‘iá»‡n tá»­ KDTBED3000",
"CÃ¢n Ä‘iá»‡n tá»­ ALC-30C+",
"CÃ¢n Ä‘iá»‡n tá»­, dÃ¹ng Ä‘á»ƒ cÃ¢n hÃ ng hoÃ¡, loáº¡i HMV8201,",
"CÃ¢n Ä‘iá»‡n tá»­ GS-3202NF"
];

function formatNumber(num){return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}
function parseNumber(str){return parseInt(str.replace(/,/g,""))||0}

function themHang(){
  const tbody=document.querySelector('#hangTable tbody');
  const tr=document.createElement('tr');

  /* táº¡o select + textarea trong cÃ¹ng 1 Ã´ */
  let opts = '<option value=""></option>';
  MAU_TEN.forEach(t=> opts+=`<option value="${t.replace(/"/g,'&quot;')}">${t}</option>`);

  tr.innerHTML=`
    <td>
      <div class="ten-sp-wrapper">
        <textarea rows="2" placeholder="TÃªn SP"></textarea>
        <select onchange="this.previousElementSibling.value=this.value">${opts}</select>
      </div>
    </td>
    <td><input type="number" min="1" value="1"></td>
    <td><input type="text" placeholder="0" oninput="formatInput(this)"></td>
    <td><button class="btn-del" onclick="this.closest('tr').remove()">XÃ³a</button></td>
  `;
  tbody.appendChild(tr);
}
function formatInput(el){
  let v=el.value.replace(/,/g,'');
  if(!isNaN(v)&&v!=='') el.value=formatNumber(v);
}
themHang(); // dÃ²ng Ä‘áº§u tiÃªn

async function guiTelegram(){
  const cty_mst=document.getElementById('cty_mst').value.trim();
  if(!cty_mst){alert("Vui lÃ²ng nháº­p TÃªn cÃ´ng ty & MST!");return;}
  let msg=`ğŸ“„ YÃŠU Cáº¦U HÃ“A ÄÆ N NHÃP\n${cty_mst}\n\nChi tiáº¿t:\n`;

  const rows=document.querySelectorAll('#hangTable tbody tr');
  let ok=false;
  rows.forEach(r=>{
    const ten=r.cells[0].querySelector('textarea').value.trim();
    const sl=r.cells[1].querySelector('input').value;
    const dg=parseNumber(r.cells[2].querySelector('input').value);
    if(ten){msg+=`- ${ten} | SL:${sl} | ÄG:${dg}\n`;ok=true;}
  });
  if(!ok){alert("Vui lÃ²ng nháº­p Ã­t nháº¥t 1 sáº£n pháº©m!");return;}

  try{
    await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({chat_id:CHAT_ID,text:msg})
    });
    alert("Gá»­i thÃ nh cÃ´ng!");
  }catch(e){alert("Lá»—i gá»­i Telegram: "+e);}
}
</script>

</body>
</html>
