<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Báo giá sản phẩm</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      width: 210mm;
      margin: auto;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }
    td, th {
      border: 1px solid rgba(0, 0, 0, 0.4);
      padding: 5px;
      text-align: center;
      vertical-align: middle;
    }
    .header-cell {
      text-align: left;
      vertical-align: top;
      padding-top: 5px;
      padding-left: 15px;
    }
    .header-cell2 {
      text-align: left;
      vertical-align: top;
      padding-top: 5px;
      padding-left: 30px;
      width: 250px;
    }
    .header-cell span, .header-cell2 span {
      display: inline-block;
      vertical-align: top;
      margin: 0;
    }
    .header-cell input, .header-cell textarea {
      margin: 0px 2px;
      padding: 0;
      vertical-align: top;
      text-align: left;
      resize: none;
      overflow: hidden;
      width: auto;
      min-height: 20px;
      font-weight: bold;
      font-family: inherit;
      font-size: 14px;
      border: none;
      display: inline-block;
    }
   .header-cell textarea.address {
    margin-top: 2px;
    height: 23px !important;
    font-weight: normal;
    font-size: 14px;
}
    .header-cell2 input {
      width: 100px;
    }
    .header-cell textarea {
      width: 300px;
    }
    input#dateInput {
      text-align: left;
    }
    .header-cell input:focus, .header-cell textarea:focus, .header-cell2 input:focus {
      outline: none;
    }
    input[type="text"], input[type="number"], textarea {
      width: 95%;
      border: none;
      text-align: center;
      resize: none;
      font-family: inherit;
      font-size: 14px;
    }
    textarea.product-name {
      text-align: center; /* Canh giữa tên sản phẩm theo chiều ngang */
      vertical-align: middle; /* Canh giữa theo chiều dọc */
    }
    textarea {
      min-height: 60px;
      overflow: hidden;
    }
    input:focus, textarea:focus {
      outline: none;
    }
    img.preview {
      max-width: 100px;
      max-height: 100px;
      display: block;
      margin: auto;
    }
    input.image-url {
      display: block;
      width: 95%;
      margin: auto;
    }
    input.image-url.hidden {
      display: none;
    }
    #printBtn, #addRowBtn {
      position: fixed;
      bottom: 20px;
      padding: 10px 20px;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
    }
    #printBtn {
      right: 20px;
      background-color: #4CAF50;
    }
    #addRowBtn {
      right: 100px;
      background-color: #008CBA;
    }
    @media print {
            @page {
                size: A4 portrait;
                margin: 20mm;
                margin-top: 0;
                margin-bottom: 0;
            }
            header, footer, #printBtn, #addRowBtn, input::placeholder, textarea::placeholder {
                display: none !important;
            }
            .editable {
                border: none !important;
                padding: 0;
                display: inline;
                background: transparent;
            }
            input, textarea {
                border: none;
            }
            body {
                margin: 0;
                padding: 0;
            }
        }
    .sib {
      font-weight: 400;
      font-size: 12px;
      color: #000;
      font-style: italic;
    }
    .vaofd {
     margin: -10px 0px 20px 0px;
    }

    .vaofd p {
    color: #7a7979;
    font-weight: 300;
    font-size: 12px;
    margin: 3px 0px !important;
}
 .logo {
    position: relative;
    
    padding-left: 73px; /* chừa khoảng cho logo bên trái */
    background-color: #fff; /* nền trắng */
}

.logo::before {
    content: "";
    position: absolute;
    left: 0px; /* vị trí logo bên trái */
    top: 50%;
    transform: translateY(-50%);
    width: 66px;  /* chiều rộng logo */
    height: 66px; /* chiều cao logo */
    background-image: url('https://raw.githubusercontent.com/contactluva/bathroom/refs/heads/main/logo%20QM.webp');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    
    pointer-events: none; /* không ảnh hưởng tới click */
}

    .signature-container {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      font-size: 14px;
      text-align: center;
    }
    .signature {
      width: 45%;
    }
    .signature p {
      margin: 10px 0;
    }
    textarea.product-name
 {
    align-content: center;
}
textarea {
    height: 23px;
}
  </style>
</head>
<body>
   <div class="logo"> <p><strong>CÔNG TY TNHH QUANG MINH VN</strong></p>
<div class="vaofd">
<p>MST:2401038011</p>
  <p>Thôn Hữu Định, xã Hợp Thịnh, Bắc Giang</p>
</div></div>

  <table>
    <tr>
      <td colspan="2" class="header-cell">
        <span><i>Khách hàng: </i></span>
        <span><textarea placeholder="Nhập tên công ty" oninput="autoResize(this)"></textarea></span><br>
        <span><i>Địa chỉ: </i></span>
        <span><textarea class="address" placeholder="Nhập địa chỉ" oninput="autoResize(this)"></textarea></span>
      </td>
      <td class="header-cell2">
        <span><i>Ngày: </i></span>
        <span><input type="text" id="dateInput" placeholder="dd/mm/yyyy"></span>
      </td>
    </tr>
  </table>
  <h4 style="text-align: center;font-weight: 400;">ĐH:QM8093201</h4>
  <h1 style="text-align: center;">PHIẾU XUẤT KHO</h1>

  <table>
    <thead>
      <tr>
        <th>Tên sản phẩm</th>
        <th>Giá bán lẻ <br><span class="sib">(đ) (Chưa VAT)</span></th>
        <th>Số lượng<br><span class="sib">(cái)</span></th>
        <th>Thành tiền<br><span class="sib">(đ)</span></th>
      </tr>
    </thead>
    <tbody id="productRows">
      <tr>
        <td><textarea class="product-name" placeholder="Tên sản phẩm" oninput="autoResize(this)"></textarea></td>
        <td><input type="number" placeholder="Giá" oninput="calcTotal()"></td>
        <td><input type="number" placeholder="SL" oninput="calcTotal()"></td>
        <td><input type="text" readonly></td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="3" style="text-align:right">VAT (8%)<span class="sib"> (đ)</span></td>
        <td><input type="text" id="vat" readonly></td>
      </tr>
      <tr>
        <td colspan="3" style="text-align:right"><strong>Tổng<span class="sib"> (đ)</span></strong></td>
        <td><input type="text" id="total" readonly></td>
      </tr>
      <tr>
        <td colspan="4" style="text-align:left; font-size: 12px;font-weight: 300;"><strong>Sản phẩm mới 100% . Được Bảo hành 12 tháng tại CÔNG TY TNHH QUANG MINH VN kể từ ngày giao hàng.</strong></td>
      </tr>
    </tfoot>
  </table>

  <div class="signature-container">
    <div class="signature">
      <p><strong>KHÁCH HÀNG</strong></p>
      <p>(Ký, họ tên)</p>
    </div>
    <div class="signature">
      <p><strong>QUANGMINH., LTD</strong></p>
      <p>(Ký, họ tên)</p>
    </div>
  </div>

  <button id="addRowBtn" onclick="addRow()">Thêm hàng</button>
  <button id="printBtn" onclick="window.print()">In PDF</button>

  <script>
    // Hàm tự động điều chỉnh kích thước textarea
    function autoResize(textarea) {
      textarea.style.height = 'auto';
      textarea.style.height = `${textarea.scrollHeight}px`;
    }

    // Hàm tính tổng
    function calcTotal() {
      const rows = document.querySelectorAll("#productRows tr");
      let subtotal = 0;
      rows.forEach(row => {
        const price = parseFloat(row.cells[1].querySelector('input').value) || 0; // Giá
        const qty = parseFloat(row.cells[2].querySelector('input').value) || 0; // Số lượng
        const total = price * qty;
        row.cells[3].querySelector('input').value = total ? total.toLocaleString() : ''; // Thành tiền
        subtotal += total;
      });
      const vat = subtotal * 0.08;
      document.getElementById('vat').value = vat ? vat.toLocaleString() : '';
      document.getElementById('total').value = (subtotal + vat) ? (subtotal + vat).toLocaleString() : '';
    }

    // Hàm thêm hàng mới
    function addRow() {
      const tbody = document.getElementById('productRows');
      const newRow = document.createElement('tr');
      newRow.innerHTML = `
        <td><textarea class="product-name" placeholder="Tên sản phẩm" oninput="autoResize(this)"></textarea></td>
        <td><input type="number" placeholder="Giá" oninput="calcTotal()"></td>
        <td><input type="number" placeholder="SL" oninput="calcTotal()"></td>
        <td><input type="text" readonly></td>
      `;
      tbody.appendChild(newRow);
    }

    // Hàm định dạng ngày hiện tại thành dd/mm/yyyy
    function getCurrentDate() {
      const today = new Date();
      const day = String(today.getDate()).padStart(2, '0');
      const month = String(today.getMonth() + 1).padStart(2, '0');
      const year = today.getFullYear();
      return `${day}/${month}/${year}`;
    }

    // Điền ngày hiện tại vào input khi trang được tải
    window.onload = function() {
      const dateInput = document.getElementById('dateInput');
      dateInput.value = getCurrentDate();
    };
  </script>
</body>
</html>
